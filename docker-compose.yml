version: "3.9"

services:
    app:
        build: ./frontend/
        ports:
            - "80:80"
        depends_on:
            - api

    api:
        build: ./backend/
        ports:
            - "8080:8080"
        environment:
            PORT: 8080
        env_file: .env.prod
        depends_on:
            - mongo

    mongo:
        image: mongo
        restart: unless-stopped
        environment:
            MONGO_INITDB_ROOT_USERNAME: admin
            MONGO_INITDB_ROOT_PASSWORD: pass
